{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "http://dsp.polito.it/biblioschema.json",

    "definitions": {
      "item": {
        "type": "object",
        "properties": {
          "id": {"type":"string"},
          "title": { "type": "string" },
          "subtitle": { "type": "string" },
          "authors": { 
              "type": "array",
              "items": {"type":"string"},
              "minItems": 1          
          },
          "citing":{ "type": "string", "format": "uri" },
          "cited":{ "type": "string", "format": "uri" },
          "self":{ "type": "string", "format": "uri" },
          "extension": {
            "type":"object",
            "properties":{
              "article": {
                "type": "object",
                "properties": {
                  "publishedIn":{ "type": "string", "format": "uri" }
                  },
                  "required": ["publishedIn"]
              },
              "book": {
                "type": "object",
                "properties": {
                  "isbn":{"$ref": "#definitions/isbn"},
                  "year": {"type":"integer"},
                  "publisher":{"type": "string"}
                },
                "required": ["isbn","year"]
              }
            },
            "maxProperties": 1,
            "minProperties": 1
          }
        },
        "required": ["title","authors","extension"]
      },
      "issn": {
        "type":"string", "pattern": "[0-9]{4}-[0-9]{3}[0-9xX]"
      },
      "isbn": {
        "type":"string", "pattern": "([0-9]{13})|([0-9]{9}([0-9]|X))"
      },
      "items": {
          "type":"object",
          "properties": {
            "totalPages": {"type":"integer"},
            "pageNumber": {"type":"integer"},
            "pageItems": {
              "type":"array",
              "items": {"$ref": "#definitions/item"}
            },
            "next": {"type":"string", "format": "uri"},
            "self":{ "type": "string", "format": "uri" }
          }
      },
      "journal": {
        "type":"object",
        "properties": {
          "title": {"type":"string"},
          "publisher": {"type":"string"},
          "issn": { "$ref": "#definitions/issn"},
          "issues": {
            "type":"string", "format": "uri"
          },
          "self":{ "type": "string", "format": "uri" }
        },
        "required": ["title","issn"]
      },
      "issue": {
        "type":"object",
        "properties": {
          "year": {"type":"integer"},
          "number": {"type":"integer", "minimum": 0},
          "journal": {"type": "string", "format": "uri"},
          "self":{ "type": "string", "format": "uri" }
        },
        "required": ["year","number","journal"]
      },
      "issues": {
        "type":"array",
        "items": {"$ref": "#definitions/issue"}
      },
      "journals": {
        "type":"array",
        "items": {"$ref": "#definitions/journal"}
      },
      "biblio": {
        "type": "object",
        "properties": {
          "items": {"type":"string", "format": "uri"},
          "journals": {"type":"string", "format": "uri"},
          "self":{ "type": "string", "format": "uri" }
        },
        "required": ["items", "journals"]
      }
    }
  }